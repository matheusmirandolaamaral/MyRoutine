@using MyRoutine.Extensions
@model MyRoutine.Models.ViewModels.DietDetailsViewModel
@{
    ViewData["Title"] = "Diet Details";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container my-4">

    <!-- Header da dieta -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="text-primary">@Model.Diet.Name</h1>
        <span class="badge bg-success fs-5">
            Total de Calorias: @Model.TotalCalories
        </span>
    </div>

    <p><strong>Início:</strong> @Model.Diet.DateInitial.ToString("dd/MM/yyyy")</p>
    <p><strong>Final:</strong> @Model.Diet.DateFinal?.ToString("dd/MM/yyyy")</p>

    <!-- Cards de refeições -->
    <div class="row">
        @foreach (var meal in Model.Meals)
        {
            <div class="col-md-6 col-lg-4 mb-3">
                <div class="card h-100 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">@meal.Type.GetDisplayName() - @meal.Name</h5>
                        <p class="card-text">@meal.Description</p>
                        <p class="fw-bold">Calories: @meal.Calories</p>
                    </div>
                    <div class="card-footer d-flex justify-content-between">
                        <a asp-action="Edit" asp-controller="Meals" asp-route-id="@meal.Id" class="btn btn-sm btn-outline-primary">Editar</a>
                        <a asp-action="Delete" asp-controller="Meals" asp-route-id="@meal.Id" class="btn btn-sm btn-outline-danger">Remover</a>
                    </div>
                </div>
            </div>
        }
    </div>

    <!-- Botão para adicionar nova refeição -->
    <div class="mt-4">
        <a asp-action="Create" asp-controller="Meals" asp-route-dietId="@Model.Diet.Id" class="btn btn-success btn-lg">
            Adicionar
        </a>
    </div>
</div>
